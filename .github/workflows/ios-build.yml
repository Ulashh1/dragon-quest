name: iOS Build & Test

on:
  push:
    branches: [ main, master, develop ]
  pull_request:
    branches: [ main, master, develop ]
  workflow_dispatch:

jobs:
  build:
    name: Build and Test
    runs-on: macos-latest
    
    steps:
    - name: Checkout
      uses: actions/checkout@v4
    
    - name: Select Xcode
      run: sudo xcode-select -s /Applications/Xcode.app/Contents/Developer
    
    - name: Xcode version
      run: /usr/bin/xcodebuild -version
    
    - name: Build with Swift Package Manager
      run: swift build -c release
    
    - name: List all Swift files
      run: find DragonQuest -name "*.swift" | wc -l
    
    - name: Check Swift syntax
      continue-on-error: true
      run: |
        for file in $(find DragonQuest -name "*.swift"); do
          echo "Checking: $file"
        done
    
    - name: Build Status
      run: echo "âœ… Build completed successfully!"

